function actionsClubViewDirective(){"use strict";var e=["delete","redact"];return{restrict:"A",scope:{process:"=",type:"=",index:"="},link:function(t,r,o){function n(){t.process===!0?s(t.index,t.type):a()}function s(t,r){var o=void 0===t?-1:+t,n=angular.element(document.querySelectorAll(c));if(n.length)if(-1===o||isNaN(o))n.find(l).prop("disabled",!0);else if(o>=0){var s=n.filter(function(t){if(t!==o)return!0;var n="."+u+"-"+e[r];return jQuery(this).addClass("active").css("display","none").nextAll(n).css("display","block"),!1});s.find(l).prop("disabled",!0)}}function a(){var e=angular.element(document.querySelectorAll(c+" "+l+":disabled")),t=angular.element(document.querySelectorAll(c+".active"));e.length&&e.prop("disabled",!1),t.length&&t.css("display","block").removeClass("active").nextAll().css("display","none")}function i(e){var t=angular.element(document.querySelectorAll(c+":not(.active) "+l+":not(:disabled)"));t.length&&t.prop("disabled",!0)}var c=o.actionsClubView,l=o.children,u=o.baseClassPart;t.$watch("process",n),t.$on("beginClubAction",function(e,t,r){s(t,r)}),t.$on("endClubAction",function(e){a()}),t.$on("endAddProcessClubAction",i)}}}function actionsGridViewDirective(){"use strict";var e,t={active:"active"};return{restrict:"A",scope:{subElementSelector:"@actionsGridView",actionElementsSelector:"@clickSelector",endAction:"="},link:function(r,o,n){function s(o){e=angular.element(o.target).parents(r.subElementSelector),e&&e.addClass(t.active)}function a(r){r===!1&&e&&(e.removeClass(t.active),e=null)}r.$watch("endAction",a),o.on("click",r.actionElementsSelector,s)}}}function backToTopBottomDirective(e,t){"use strict";var r=200,o=17;return{restrict:"A",scope:{backToTopBottom:"@",selectorClass:"@",delay:"@",bottom:"@",isStopCond:"@",stop:"&"},link:function(n,s,a){function i(e){n.isStopCond&&n.stop()||(y?setTimeout(c,y):c())}function c(){clearTimeout(f),u=window.pageYOffset;var r;if(g){var n=e.innerHeight,s=t.height();r=s-n-u,d=s-n}else r=u,d=0;r>1&&(p=r/m*o,g&&(p=-p),200>r&&(p=2*p),l())}function l(){u-=p,window.scroll(0,u),Math.abs(u-d)>Math.abs(p)+2?f=setTimeout(l,o):window.scroll(0,d)}var u,d,p,f,m=parseInt(n.backToTopBottom)||r,y=parseInt(n.delay)||0,g="true"===n.bottom;n.selectorClass?s.on("click","."+n.selectorClass,i):s.on("click",i)}}}function bsTooltipDirective(){"use strict";return{restrict:"A",link:function(e,t,r){t.attr("data-toggle","tooltip"),t.tooltip()}}}function clubNameDirective(e,t,r){"use strict";return{restrict:"A",require:"ngModel",scope:{country:"=country",redactClub:"=redactClub"},link:function(o,n,s,a){function i(){e(function(){n.trigger("checkTouchedFieldView")},0)}a.$asyncValidators.clubName=function(e,n){if(a.$isEmpty(e)||""!==o.redactClub&&e===o.redactClub)return t.when();var s;return s=r.isClubUnique(e,o.country),s.then(i,i),s}}}}function clubOfPlayerAutocompleteDirective(e,t,r){"use strict";return{restrict:"A",require:"ngModel",scope:{checkClub:"=clubOfPlayerAutocomplete",country:"=",selectData:"&onSelect"},link:function(o,n,s,a){function i(e){e.message&&o.selectData({data:e.values}),t(function(){n.trigger("checkTouchedFieldView")},0)}n.autocomplete({source:function(e,t){var o={name:e.term},n=r.searchClubByName(o);n.then(function(e){t(e.values)},function(){t()})},minLength:2,delay:600,select:function(e,t){o.selectData({data:t.item}),o.$apply()}}),n.on("keydown",function(e){o.checkClub=!1,o.$apply()}),n.on("blur",function(e){a.$viewValue=n.val(),o.$apply()}),a.$asyncValidators.clubOfPlayerAutocomplete=function(t,s){if(o.checkClub||a.$isEmpty(t))return e.when();var c,l=t===n.val()?t:n.val();return c=r.getOne(l,o.country,!o.checkClub),c.then(i,i),c}}}}function dlcModalDirective(){"use strict";return{restrict:"E",replace:!0,transclude:!0,templateUrl:"templates/modal.html",scope:{isShown:"=show",header:"@modalTitle",close:"&"},link:function(e,t,r){function o(){e.isShown?document.addEventListener("keyup",n,!1):document.removeEventListener("keyup",n,!1)}function n(t){27===+t.which&&(e.close(),e.$apply())}e.$watch("isShown",o)}}}function dlcNumberDirective(){"use strict";var e=/^-?[1-9]\d*$/,t=/^-?(?:0|[1-9]\d*)(?:\.\d+)?$/;return{restrict:"A",require:"ngModel",scope:{dlcNumber:"@"},link:function(r,o,n,s){function a(t){return 0===t||e.test(t)?!0:!1}function i(e){return t.test(e)?!0:!1}function c(e){var t=+n.min,r=+n.max;return t>e||e>r?!1:!0}var l="true"===n.minMax;s.$validators.dlcNumber=function(e,t){return s.$isEmpty(e)?!0:l&&!c(+e)?!1:"integer"===r.dlcNumber?a(e):i(e)}}}}function dlcPaginationDirective(e){"use strict";return{restrict:"EA",replace:!0,scope:{pages:"=dlcPagination",page:"=",btnBlockClass:"@",btnClass:"@",firstLastPagsStartOn:"@",baseHref:"@",firstGood:"@"},template:function(e,t){var r=['<div ng-show="pages>1" class="{{btnBlockClass}} dlc-pagination">','<a ng-if="pages>=firstLastPagsStartOn&&page!=1" ng-href="#{{baseHref}}1" class="{{btnClass}}">','<i class="fa fa-angle-double-left"></i>',"</a>",'<button ng-if="pages>=firstLastPagsStartOn&&page==1" class="{{btnClass}}" disabled>','<i class="fa fa-angle-double-left"></i>',"</button>",'<a ng-if="page!=1" ng-href="#{{baseHref}}{{page-1}}" class="{{btnClass}}">','<i class="fa fa-angle-left"></i>',"</a>",'<button ng-if="page==1" class="{{btnClass}}" disabled>','<i class="fa fa-angle-left"></i>',"</button>",'<a ng-if="page!=pages" ng-href="#{{baseHref}}{{page+1}}" class="{{btnClass}}">','<i class="fa fa-angle-right"></i>',"</a>",'<button ng-if="page==pages" class="{{btnClass}}" disabled>','<i class="fa fa-angle-right"></i>',"</button>",'<a ng-if="pages>=firstLastPagsStartOn&&page!=pages" ng-href="#{{baseHref}}{{pages}}" class="{{btnClass}}">','<i class="fa fa-angle-double-right"></i>',"</a>",'<button ng-if="pages>=firstLastPagsStartOn&&page==pages" class="{{btnClass}}" disabled>','<i class="fa fa-angle-double-right"></i>',"</button>","</div>"].join("");return r},link:function(t,r,o){function n(){var e,n,c,l=r.children().eq(t.pages<t.firstLastPagsStartOn?0:1),u="";if(i){var d=r.children();d.each(function(){var e=this.innerHTML;"..."!==e&&isNaN(+e)||angular.element(this).remove()})}if(t.pages<=a||"true"===o.alwaysFull)for(e=0,n=t.pages;n>e;e++)u+=s(e);else{for(e=0,n=2;n>e;e++)u+=s(e);if(2===t.page&&(u+=s(2)),(t.page<3||t.page>4)&&(u+='<span class="fromto">...</span>'),t.page>2&&t.page<=t.pages-2){for(c=3===t.page?2:t.page-2,e=c,n=t.page+1;n>e;e++)u+=s(e);t.pages-2-t.page>1&&(u+='<span class="fromto">...</span>')}for(c=t.page===t.pages-2?t.pages-1:t.page===t.pages-1?t.pages-3:t.pages-2,e=c;e<t.pages;e++)u+=s(e)}l.after(u),i=!0}function s(e){var r;return r=e!==t.page-1?'<a href="#'+t.baseHref+(e+1)+'" class="'+t.btnClass+'">'+(e+1)+"</a>":'<button class="'+t.btnClass+' active" disabled>'+(e+1)+"</button>"}var a=8,i=!1;t.btnBlockClass||(t.btnBlockClass="btn-group"),t.btnClass||(t.btnClass="btn btn-default"),t.firstLastPagsStartOn||(t.firstLastPagsStartOn=6),t.baseHref||(t.baseHref=e.path()),t.baseHref=-1===t.baseHref.indexOf("page")?"/"===t.baseHref[t.baseHref.length-1]?t.baseHref+"page/":t.baseHref+"/page/":t.baseHref.substring(0,t.baseHref.indexOf("page"))+"page/",t.$watch("pages",function(e,r){"true"===t.firstGood?(setTimeout(n,0),t.firstGood=!1):e>1&&r!==e&&setTimeout(n,0)})}}}function dlcSortDirective(){"use strict";var e,t={sortClass:"dlc-sort-item",sortAttr:"data-sort-value",sortHideClass:"dlc-sort-hidden"},r='&nbsp;<i class="fa fa-chevron-down '+t.sortHideClass+'"></i><i class="fa fa-chevron-up '+t.sortHideClass+'"></i>';return{restrict:"A",scope:{sort:"=dlcSort"},link:function(o,n,s){function a(r){var n=this.getAttribute(t.sortAttr),s=o.sort.indexOf(n);-1===s||1===s?e="up":0===s&&(e="down",n="-"+n),o.sort=n,c(this),o.$apply()}function i(r,o){e="-"===r[0]?"down":"up";for(var n,s="down"===e?r.substring(1):r,a=0;a<l.length;a++)if(l.eq(a).attr(t.sortAttr)===s){n=l.get(a);break}c(n)}function c(r){l.find("i").each(function(){-1===this.getAttribute("class").indexOf(t.sortHideClass)&&this.setAttribute("class",this.getAttribute("class")+" "+t.sortHideClass)}),r.getElementsByClassName("fa-chevron-"+e)[0].setAttribute("class","fa fa-chevron-"+e)}var l=n.find("."+t.sortClass);l.append(r),e="-"===o.sort[0]?"down":"up";var u="down"===e?o.sort.substring(1):o.sort,d=n.find("."+t.sortClass+"[data-sort-value="+u+"]");d.find(".fa-chevron-"+e).removeClass(t.sortHideClass),l.on("click",a),o.$watch("sort",i)}}}function reactiveForm(e){"use strict";var t=null,r=5e3,o={successForm:"has-success",errorForm:"has-error",success:"alert alert-success",error:"alert alert-danger",notRedacting:"dlc-not-redacting"},n={isDisplayed:!1,addSuccess:"Record added successfully",addError:"When you try to add an entry error occurred",redactSuccess:"Editing was successful",redactError:"When editing error occurred"};return{restrict:"A",require:"form",scope:{actionType:"=",actionResult:"=",clearForm:"=",actionRedact:"="},link:function(s,a,i,c){function l(e,t){""!==e&&("success"===e?p(s.actionType):"error"===e&&f(s.actionType),s.actionResult="",s.actionType="")}function u(e,t){e&&m()}function d(e,t){e?a.find("."+o.notRedacting).prop("readonly",!0):a.find("."+o.notRedacting).prop("readonly",!1)}function p(e){"add"===e?(m(),y(n.addSuccess,o.success)):y(n.redactSuccess,o.success)}function f(e){var t="add"===e?n.addError:n.redactError;y(t,o.error)}function m(){var e=a.find("."+o.successForm),t=a.find("."+o.errorForm),r=a.find("."+b);e.length&&e.removeClass(o.successForm),t.length&&t.removeClass(o.errorForm),r.length&&r.css("display","none"),c.$setPristine(),c.$setUntouched()}function y(o,s){n.isDisplayed&&(g(),t=null),h.addClass(s).text(o),n.isDisplayed=!0,t=e(g,r)}function g(){h.text("").removeClass(),n.isDisplayed=!1}var h=angular.element(document.querySelectorAll(i.messageBox)),b=i.errBlockClass;s.$watch("actionResult",l),s.$watch("clearForm",u),s.$watch("actionRedact",d),s.$on("actionClubError",function(e,t){f(t)}),s.$on("actionClubSuccess",function(e,t){p(t)}),s.$on("clearClubForm",function(e){m()})}}}function touchedFieldView(){"use strict";var e={success:"has-success",error:"has-error"};return{restrict:"A",require:"^form",scope:{param:"@touchedFieldView"},link:function(t,r,o,n){function s(o){var s;n[t.param].$invalid&&n[t.param].$touched?(r.addClass(e.error),s=r.find("."+c),s.length&&s.css("display","block")):r.hasClass(e.error)&&(r.removeClass(e.error),s=r.find("."+c),s.length&&s.css("display","none")),n[t.param].$valid&&n[t.param].$touched&&r.addClass(e.success)}var a=r.find("[name="+t.param+"]"),i=o.checkAjaxView,c=o.errBlockClass;a.length&&(a.on("blur",s),"true"===i&&a.on("checkTouchedFieldView",s))}}}function updateClubsTableViewDirective(){"use strict";var e={chL:"bg-success",euL:"bg-info",clubRemove:"bg-danger-dlc"};return{restrict:"A",scope:{championsLeague:"@chl",leagueEurope:"@el",clubRemove:"@",tableResult:"="},link:function(t,r,o){function n(e){a()}function s(e){setTimeout(a,0)}function a(){var o=r.find(i);o.each(function(r){var o=angular.element(this);r<t.championsLeague&&!o.hasClass(e.chL)?o.addClass(e.chL):r>=t.championsLeague&&o.hasClass(e.chL)&&o.removeClass(e.chL),r>=t.championsLeague&&r<t.leagueEurope&&!o.hasClass(e.euL)?o.addClass(e.euL):(r>=t.leagueEurope||r<t.championsLeague)&&o.hasClass(e.euL)&&o.removeClass(e.euL),0!==+t.clubRemove&&r>=t.clubRemove&&!o.hasClass(e.clubRemove)?o.addClass(e.clubRemove):r<t.clubRemove&&o.hasClass(e.clubRemove)&&o.removeClass(e.clubRemove)})}var i=o.updateClubsTableView;t.$on("updateTableView",function(e){a()}),t.$watch("championsLeague",n),t.$watch("tableResult",s)}}}function arrayHelperService(){"use strict";this.deleteOneByProperty=function(e,t,r){if(void 0!==r)for(var o=0,n=e.length;n>o;o++)if(e[o][t]===r){e.splice(o,1);break}},this.changeOneByPropertyAndSort=function(e,t,r,o){for(var n=0,s=e.length;s>n;n++)if(e[n][r]===t[r]){angular.copy(t,e[n]);break}e.sort(function(e,t){return t[o]-e[o]})},this.addByProperty=function(e,t,r){var o=e.length;if(!o||t[r]<=e[o-1][r])e.push(t);else for(var n=0;o>n;n++)if(t[r]>e[n][r]){e.splice(n,0,t);break}},this.createGroupsFromArray=function(e,t){if(e){for(var r=[],o=[],n=0,s=0;s<e.length;s++)s%t===0&&0!==s&&(r[n]=angular.copy(o),n++,o=[]),o.push(e[s]);return r[n]=angular.copy(o),r}},this.groupByProperty=function(e,t){for(var r=[],o=e.length,n=0;o>n;){var s={propertyName:t,propertyValue:e[n][t],data:[e[n++]]};for(r.push(s);o>n&&e[n][t]===e[n-1][t];)s.data.push(e[n]),n++}return r}}function countryService(e,t){"use strict";this.getOne=function(r){var o=t.defer(),n={method:"GET",url:"lib/country.php",params:{country:r},headers:{"X-Requested-With":"XMLHttpRequest"}};return e(n).success(function(e,t){e.mistake?o.reject(e,t):o.resolve(e)}).error(function(e,t){o.reject(e,t)}),o.promise},this.getOneBaseInfo=function(r){var o=t.defer(),n={method:"GET",url:"lib/country1.php",params:{country:r},headers:{"X-Requested-With":"XMLHttpRequest"}};return e(n).success(function(e,t){e.mistake?o.reject(e,t):o.resolve(e)}).error(function(e,t){o.reject(e,t)}),o.promise},this.getAll=function(){var r=t.defer(),o={method:"GET",url:"lib/countries.php",headers:{"X-Requested-With":"XMLHttpRequest"},cache:!0};return e(o).success(function(e,t){e.mistake?r.reject(e,t):r.resolve(e)}).error(function(e,t){r.reject(e,t)}),r.promise}}function playerPositionsService(e,t){this.getAll=function(r,o){var n=e.defer(),s={method:"GET",url:"lib/positions.php",headers:{"X-Requested-With":"XMLHttpRequest"},cache:!0};return t(s).success(function(e,t){void 0===e.mistake&&e.values.length?n.resolve(e):n.reject(e,t)}).error(function(e,t){n.reject(e,t)}),n.promise}}function playerService(e,t){this.getAll=function(r,o,n){var s=e.defer(),a={method:"GET",url:"lib/players.php",params:{club:r,country:o},headers:{"X-Requested-With":"XMLHttpRequest"}};return n&&(n.orderBy&&(a.headers["X-OrderBy"]=n.orderBy,"DESC"===n.direction.toUpperCase()&&(a.headers["X-OrderDirection"]="DESC")),n.limit&&(a.headers["X-Limit"]=n.limit)),t(a).success(function(e,t){void 0!==e.mistake?s.reject(e,t):s.resolve(e)}).error(function(e,t){s.reject(e,t)}),s.promise},this.getAllByPage=function(r,o,n){var s=e.defer(),a={method:"GET",url:"lib/playersByPage.php",params:{country:r,page:o,countOnPage:n},headers:{"X-Requested-With":"XMLHttpRequest"}};return t(a).success(function(e,t){e.mistake?s.reject(e,t):s.resolve(e)}).error(function(e,t){s.reject(e,t)}),s.promise},this.add=function(r){var o=e.defer(),n={method:"POST",url:"lib/addPlayer.php",data:{player:r},headers:{"X-Requested-With":"XMLHttpRequest"}};return t(n).success(function(e,t){e.mistake?o.reject(e,t):o.resolve(e)}).error(function(e,t){o.reject(e,t)}),o.promise},this.redact=function(r){var o=e.defer(),n={method:"PUT",url:"lib/redactPlayer.php",data:{player:r},headers:{"X-Requested-With":"XMLHttpRequest"}};return t(n).success(function(e,t){e.mistake?o.reject(e,t):o.resolve(e)}).error(function(e,t){o.reject(e,t)}),o.promise},this["delete"]=function(r){var o=e.defer(),n={method:"DELETE",url:"lib/deletePlayers.php",data:{player:r.id},headers:{"X-Requested-With":"XMLHttpRequest"}};return t(n).success(function(e,t){e.mistake?o.reject(e,t):o.resolve(e)}).error(function(e,t){o.reject(e,t)}),o.promise}}function teamService(e,t){"use strict";this.getAll=function(r){var o=t.defer(),n={method:"GET",url:"lib/clubs.php",params:{country:r},headers:{"X-Requested-With":"XMLHttpRequest"}};return e(n).success(function(e,t){e.mistake?o.reject(e,t):o.resolve(e)}).error(function(e,t){o.reject(e,t)}),o.promise},this.getOne=function(r,o,n){var s=t.defer(),a={method:"GET",url:"lib/club.php",params:{club:r,country:o},headers:{"X-Requested-With":"XMLHttpRequest"}};return n===!0&&(a.params.priorityChecking=1),e(a).success(function(e,t){e.mistake?s.reject(e,t):s.resolve(e)}).error(function(e,t){s.reject(e,t)}),s.promise},this.add=function(r){var o=t.defer(),n={method:"POST",url:"lib/addClub.php",data:{club:r},headers:{"X-Requested-With":"XMLHttpRequest"}};return e(n).success(function(e,t){e.mistake?o.reject(e,t):o.resolve(e)}).error(function(e,t){o.reject(e,t)}),o.promise},this["delete"]=function(r){var o=t.defer(),n={method:"DELETE",url:"lib/deleteClub.php",data:{club:r},headers:{"X-Requested-With":"XMLHttpRequest"}};return e(n).success(function(e,t){e.mistake?o.reject(e,t):o.resolve(e)}).error(function(e,t){o.reject(e,t)}),o.promise},this.redact=function(r){var o=t.defer(),n={method:"PUT",url:"lib/redactClub.php",data:{club:r},headers:{"X-Requested-With":"XMLHttpRequest"}};return e(n).success(function(e,t){e.mistake?o.reject(e,t):o.resolve(e)}).error(function(e,t){o.reject(e,t)}),o.promise},this.isClubUnique=function(r,o){var n=t.defer(),s={method:"GET",url:"lib/club.php",params:{club:r,country:o,uniqueCheck:1},headers:{"X-Requested-With":"XMLHttpRequest"}};return e(s).success(function(e,t){e.mistake?n.resolve():n.reject()}).error(function(e,t){n.reject()}),n.promise},this.searchClubByName=function(r){var o=t.defer(),n={method:"GET",url:"lib/clubSearch.php",params:{club:r.name},headers:{"X-Requested-With":"XMLHttpRequest"}};return e(n).success(function(e,t){for(var r=0,n=e.values.length;n>r;r++)e.values[r].value=e.values[r].name;void 0!==e.mistake?o.reject(t):o.resolve(e)}).error(function(e,t){o.reject(t)}),o.promise}}function topScorerService(e,t){"use strict";this.getAll=function(r,o){var n=e.defer(),s={method:"GET",url:"lib/topScorers.php",params:{country:r},headers:{"X-Requested-With":"XMLHttpRequest"}};return o&&(s.params.limit=o),t(s).success(function(e,t){e.mistake?n.reject(e,t):n.resolve(e)}).error(function(e,t){n.reject(e,t)}),n.promise},this.redact=function(r){var o=e.defer(),n={method:"PUT",url:"lib/redactTopScorer.php",data:{player:r},headers:{"X-Requested-With":"XMLHttpRequest"}};return t(n).success(function(e,t){e.mistake?o.reject(t):o.resolve(e)}).error(function(e,t){o.reject(t)}),o.promise},this["delete"]=function(r){var o=e.defer(),n={method:"DELETE",url:"lib/deletePlayer.php",data:{player:r},headers:{"X-Requested-With":"XMLHttpRequest"}};return t(n).success(function(e,t){e.mistake?o.reject(e,t):o.resolve(e)}).error(function(e,t){o.reject(e,t)}),o.promise}}function fromUrlToStringFtr(){"use strict";return function(e){if(e){var t=e.toLowerCase();return t=t.replace(/\-/i," "),decodeURIComponent(t)}}}function urlLikeFtr(){"use strict";return function(e){if(e){var t=e.toLowerCase();return t=t.replace(/\s/i,"-"),encodeURIComponent(t)}}}function dlcSlideAnimation(){"use strict";function e(e){var r=+e.attr("data-slide-time"),o=+e.attr("data-delay"),n=e.find("button");return isNaN(r)&&(r=t),{slideTime:r,delay:o,buttons:n.length?n:void 0}}var t=500;return{addClass:function(t,r,o){if("ng-hide"===r){var n=e(t);n.buttons&&n.buttons.prop("disabled",!0),isNaN(n.delay)?jQuery(t).slideUp(n.slideTime,o):setTimeout(function(){jQuery(t).slideUp(n.slideTime,o)},n.delay)}},removeClass:function(t,r,o){if("ng-hide"===r){var n=e(t);n.buttons&&n.buttons.prop("disabled",!1),isNaN(n.delay)?jQuery(t).slideDown(n.slideTime,o):setTimeout(function(){jQuery(t).slideDown(n.slideTime,o)},n.delay)}}}}function CountriesController(e,t,r,o,n){"use strict";function s(){l(n(t.country)),a()}function a(){var e=o.getAll();e.then(i,c)}function i(t){e.countries.values=t.values}function c(e,t){console.log(t,e.mistake)}function l(e){p=e?e:"england"}function u(e){return void 0!==p&&e===p}function d(e){return-1!==r.path().indexOf("country")&&u(e)}var p;e.countries={values:[]},e.isCurrentCountry=u,e.isCurrentCountryAndInPath=d,e.$on("$routeChangeSuccess",function(e,t,r){l(t.params.country)}),s()}function CountryController(e,t,r,o){"use strict";function n(){var r=t.country?o(t.country):"england";e.country.data.name=r,s(r)}function s(e){var t=r.getOne(e);t.then(a,i)}function a(t){e.country.isLoading=!1,e.country.isResult=!0,e.country.data=t.value}function i(t,r){e.country.isLoading=!1,e.country.isMistake=!0,e.country.mistakeMessage=t.mistake,console.log(t.status,t.mistake)}e.country={isLoading:!0,isResult:!1,isMistake:!1,mistakeMessage:"",data:{}},n()}function CountryPlayersController(e,t,r,o,n){"use strict";function s(){var r=o(t.country),n=+t.page;if(!n||0>=n){if(void 0!==t.page)return e.playersPrepare.showLoading=!1,e.playersPrepare.isMistake=!0,void(e.playersPrepare.mistakeMessage="You must enter a correct number of page");n=1}a(r,n),e.players.page=n,e.players.country=r}function a(e,t){var o=r.getAllByPage(e,t,l);o.then(i,c)}function i(t){e.players.values=n.createGroupsFromArray(t.values,u),e.players.page=t.page,e.players.pages=t.pages,e.playersPrepare.showLoading=!1,e.playersPrepare.isResult=!0}function c(t,r){e.playersPrepare.showLoading=!1,e.playersPrepare.isMistake=!0,e.playersPrepare.mistakeMessage=t.mistake,console.log(t.mistake,t.status)}var l=24,u=4;e.playersPrepare={showLoading:!0,isResult:!1,isMistake:!1,mistakeMessage:"",isEmpty:!1,emptyMessage:"There is no information about players of the country"},e.players={values:[],page:0,pages:0,country:""},s()}function PlayerActionController(e,t,r){"use strict";function o(){m(),e.chooseClubSettings.priorityCountry=t.country}function n(t){t.$valid?(e.playerToAdd.positionId=+e.playerToAdd.positionId,e.addProcess.isActionForm=!0,e.addProcess.beforeSendMistake=!1,e.addProcess.redacting?l(t):s(t)):e.addProcess.beforeSendMistake=!0}function s(t){e.addProcess.actionType="add",e.playerToAdd.clubId=e.$parent.club.id;var o=r.add(e.playerToAdd);o.then(a,i)}function a(t){e.playerToAdd.id=t.id,e.$parent.endAddPlayer(angular.copy(e.playerToAdd)),m(),e.addProcess.isActionForm=!1,e.addProcess.actionResult="success"}function i(t,r){console.log(r),e.addProcess.isActionForm=!1,e.addProcess.actionResult="error"}function c(t){e.chooseClubSettings.selectedData=!0,e.addProcess.redacting=!0,e.playerToAdd=t}function l(t){e.addProcess.actionType="redact";var o=r.redact(e.playerToAdd);o.then(u,d)}function u(t){e.$parent.endRedactPlayer(angular.copy(e.playerToAdd)),e.addProcess.isActionForm=!1,e.addProcess.actionResult="success"}function d(t,r){console.log(r),e.addProcess.isActionForm=!1,e.addProcess.actionResult="error"}function p(){e.addProcess.redacting&&(e.addProcess.redacting=!1),e.addProcess.beforeSendMistake=!1,m(),e.$parent.cancelAddRedPlayer()}function f(t){e.playerToAdd.clubId=t.id,e.playerToAdd.clubValue=t.name,e.chooseClubSettings.priorityCountry=t.country,e.chooseClubSettings.selectedData=!0}function m(){e.playerToAdd={id:-1,positionId:1}}e.addProcess={isActionForm:!1,actionType:"",actionResult:"",redacting:!1,beforeSendMistake:!1},e.baseFormSettings={minAge:15,maxAge:50,minGoals:0,maxGoals:99,minPasses:0,maxPasses:99,minRating:1,maxRating:10},e.chooseClubSettings={priorityCountry:"",selectedData:!1},e.showClub=f,e.clearPlayerForm=p,e.actionPlayer=n,e.$on("redactPlayer",function(e,t){c(t)}),o()}function PlayersController(e,t,r,o,n,s){"use strict";function a(){var r=s(t.club)||"free",o=s(t.country)||"no country";e.club.name=r,e.club.country=o,u(),i(r,o)}function i(e,t){var o=r.getAll(e,t);o.then(c,l)}function c(t){if(t.values.length){for(var r=f(t.values),o=0,n=r.length;n>o;o++)h(r[o].data[0].positionId,r[o].data[0].position,r[o].data);e.preparePlayers.isResult=!0}else e.preparePlayers.isEmpty=!0,e.preparePlayers.emptyMessage=t.message;e.club.id=t.clubId,e.club.name=t.clubName,e.preparePlayers.showLoading=!1}function l(t,r){e.preparePlayers.showLoading=!1,e.preparePlayers.isMistake=!0,e.preparePlayers.mistakeMessage=t.mistake,console.log(t.status,t.mistake)}function u(){var e=o.getAll();e.then(d,p)}function d(t){e.positions.values=t.values}function p(t,r){e.positions.isMistake=!0,console.log(t.status,t.mistake)}function f(e){return n.groupByProperty(e,"positionId")}function m(e,t){return n.createGroupsFromArray(e,t)}function y(){e.actions.isActionProcess=!0,e.actions.isNeedToShowForm=!0}function g(t){var r,o,n,s;for(delete t.clubValue,n=0,s=e.players.length;s>n;n++)if(t.positionId===e.players[n].positionId){t.position=e.players[n].positionName,r=e.players[n].data;break}if(r)o=r[r.length-1],o.length<M?o.push(t):r.push([t]);else{for(n=0,s=e.positions.values.length;s>n;n++)if(t.positionId===e.positions.values[n].id){t.position=e.positions.values[n].name;break}h(t.positionId,t.position,[t]),e.players.sort(function(e,t){return e.positionId-t.positionId})}e.preparePlayers.isEmpty&&(e.preparePlayers.isEmpty=!1,e.preparePlayers.isResult=!0)}function h(t,r,o){e.players.push({positionId:t,positionName:r+"s",data:m(o,M)})}function b(t,r){e.actions.isActionProcess=!0,e.actions.isNeedToShowForm=!0;var o=angular.copy(t);o.clubValue=e.club.name,e.$broadcast("redactPlayer",o)}function v(e){delete e.clubValue,w(e,1)}function A(){e.actions.isActionProcess=!1,e.actions.isNeedToShowForm=!1}function P(t,r){D.player=t,D.index=r,e.actions.isActionProcess=!0,e.confirmingDeleteWindow.show()}function C(){e.actions.isDeletingProcess=!0;var t=r["delete"](D.player);t.then(k,T)}function S(){D.player={},D.index=-1,e.actions.isDeletingProcess=!1,e.actions.isActionProcess=!1,e.confirmingDeleteWindow.close()}function k(e){w(D.player,0),S()}function T(e,t){S(),console.log(t,e.mistake)}function w(t,r){for(var o=!1,n=0,s=e.players.length;s>n;n++){for(var a=0,i=e.players[n].data.length;i>a;a++){for(var c=0,l=e.players[n].data[a].length;l>c;c++)if(e.players[n].data[a][c].id===t.id){t.clubId===e.club.id&&t.positionId===e.players[n].data[a][c].positionId&&0!==r?e.players[n].data[a][c]=t:(1===e.players[n].data.length&&1===e.players[n].data[a].length?(e.players.splice(n,1),e.players.length||(e.preparePlayers.isEmpty=!0,e.preparePlayers.isResult=!1)):1===e.players[n].data[a].length?e.players[n].data.splice(a,1):e.players[n].data[a].splice(c,1),t.clubId===e.club.id&&1===r&&g(t)),o=!0;break}if(o)break}if(o)break}o||t.clubId!==e.club.id||g(t)}function $(){return-1!==e.club.id}function R(){e.confirmingDeleteWindow.isShown=!1}function L(){e.confirmingDeleteWindow.isShown=!0}var M=4,D={};e.preparePlayers={showLoading:!0,isResult:!1,isMistake:!1,mistakeMessage:"",isEmpty:!1,emptyMessage:"There is no players"},e.club={country:"",name:"",id:-1},e.players=[],e.positions={isMistake:!1,values:[]},e.actions={isActionProcess:!1,isDeletingProcess:!1,isNeedToShowForm:!1},e.confirmingDeleteWindow={isShown:!1,close:R,show:L},e.addPlayer=y,e.endAddPlayer=g,e.redactPlayer=b,e.endRedactPlayer=v,e.cancelAddRedPlayer=A,e.deletePlayer=C,e.confirmingDeletionPlayer=P,e.cancelDeletingPlayer=S,e.isClub=$,a()}function TeamController(e,t,r,o,n){"use strict";function s(){var e=n(t.club),r=n(t.country);a(e,r),l(e,r)}function a(e,t){var o=r.getOne(e,t);o.then(i,c)}function i(t){e.club=t.values,e.clubPrepare.showLoading=!1,e.clubPrepare.isResult=!0}function c(t,r){e.clubPrepare.showLoading=!1,e.clubPrepare.isMistake=!0,e.clubPrepare.mistakeMessage=t.mistake,console.log(t.status,t.mistake)}function l(t,r){var n={orderBy:p,direction:"DESC",limit:e.players.topCount},s=o.getAll(t,r,n);s.then(u,d)}function u(t){e.players.showLoading=!1,t.values.length?(e.players.values=t.values,e.players.isResult=!0):e.players.isEmpty=!0}function d(t,r){e.players.showLoading=!1,console.log(t.status,t.mistake)}var p="rating";e.clubPrepare={showLoading:!0,isResult:!1,isMistake:!1,mistakeMessage:""},e.club={},e.players={showLoading:!0,isResult:!1,isEmpty:!1,topCount:5,values:[]},s()}function TeamsActionController(e,t,r,o){"use strict";function n(){var t=e.clubToAdd;if(void 0!==t.games&&void 0!==t.wins&&void 0!==t.draws){var r=+t.games-t.wins-t.draws;r>=0?t.defeats=r:(t.defeats=0,t.draws=t.games-t.wins),t.points=3*t.wins+t.draws}}function s(t){t.$valid?(e.addProcess.isActionForm=!0,e.addProcess.beforeSendMistake=!1,e.addProcess.redacting?u(t):a(t)):e.addProcess.beforeSendMistake=!0}function a(t){e.addProcess.actionType="add",e.clubToAdd.countryId=e.$parent.country.id;var o=r.add(e.clubToAdd);o.then(i,c)}function i(r){e.clubToAdd.id=r.value,o.addByProperty(e.$parent.clubs.values,e.clubToAdd,"points"),e.$parent.checkIfIsEmpty(),e.clubToAdd={},e.addProcess.isActionForm=!1,e.addProcess.actionResult="success",t(function(){e.$parent.$broadcast("updateTableView"),e.$parent.$broadcast("endAddProcessClubAction")},0)}function c(t,r){console.log(r,t.mistake),e.addProcess.isActionForm=!1,e.addProcess.actionResult="error"}function l(t){e.addProcess.redacting=!0,e.addProcess.redactClubName=t.name,angular.copy(t,e.clubToAdd)}function u(t){e.addProcess.actionType="redact";var o=r.redact(e.clubToAdd);o.then(d,p)}function d(r){o.changeOneByPropertyAndSort(e.$parent.clubs.values,e.clubToAdd,"id","points"),e.addProcess.isActionForm=!1,e.addProcess.actionResult="success",t(function(){e.$parent.$broadcast("updateTableView")},0)}function p(t,r){console.log(r,t.mistake),e.addProcess.isActionForm=!1,e.addProcess.actionResult="error"}function f(){e.addProcess.redacting&&(e.addProcess.redacting=!1,e.addProcess.redactClubName=""),e.addProcess.beforeSendMistake=!1,e.clubToAdd={},e.$parent.cancelAddRedClub()}e.clubToAdd={},e.addProcess={isActionForm:!1,actionType:"",actionResult:"",redacting:!1,redactClubName:"",beforeSendMistake:!1},e.createDefeatsAndPointsIfNeed=n,e.actionClub=s,e.clearClubForm=f,e.$on("redactClub",function(e,t){l(t)})}function TeamsController(e,t,r,o,n,s,a){"use strict";function i(){c();var r=t.country?a(t.country):"england";e.country.name=r,l(r),p(r)}function c(){e.clubActions.isNeedToShowForm=!1,e.clubActions.isActionProcess=!1,e.clubActions.isDeletingProcess=!1,e.clubActions.indexAction=-1,e.clubActions.typeAction=-1}function l(e){var t=o.getAll(e);t.then(u,d)}function u(t){e.clubs.showLoading=!1,t.values.length?(e.clubs.values=t.values,e.clubs.isResult=!0):e.clubs.isEmpty=!0}function d(t,r){e.clubs.showLoading=!1,e.clubs.isMistake=!0,e.clubs.mistakeMessage=t.mistake,console.log(t.status,t.mistake)}function p(e){var t=n.getOneBaseInfo(e);t.then(f,m)}function f(t){e.country.maxGames=+t.value.maxGames,e.country.chL=+t.value.chL,e.country.euL=+t.value.euL,e.country.id=+t.value.id,e.country.clubsToRemove=+t.value.clubsToRemove,e.country.maxCountClubs=+t.value.maxCountClubs}function m(t,r){e.country.isMistake=!0,console.log(t.status,t.mistake)}function y(){k()?e.okMaxClubMessage.show():(e.clubActions.isActionProcess=!0,e.clubActions.isNeedToShowForm=!0)}function g(t,r){e.clubActions.isActionProcess=!0,e.clubActions.isNeedToShowForm=!0,e.clubActions.indexAction=r,e.clubActions.typeAction=1,e.$broadcast("redactClub",t)}function h(){c()}function b(t,r){L=t,e.clubActions.isActionProcess=!0,e.clubActions.indexAction=r,e.clubActions.typeAction=0,e.confirmingDeleteWindow.show()}function v(){e.clubActions.isDeletingProcess=!0;var t=o["delete"](L.id);t.then(P,C)}function A(){L={},c(),e.confirmingDeleteWindow.close()}function P(t){s.deleteOneByProperty(e.clubs.values,"id",L.id),e.clubs.values||(e.clubs.isEmpty=!0,e.clubs.isResult=!1),A(),r(function(){e.$broadcast("updateTableView")},0)}function C(e,t){A(),console.log(t,e.mistake)}function S(){e.clubs.isEmpty&&(e.clubs.isEmpty=!1,e.clubs.isResult=!0)}function k(){return e.clubs.values.length===e.country.maxCountClubs}function T(){e.confirmingDeleteWindow.isShown=!1}function w(){e.confirmingDeleteWindow.isShown=!0}function $(){e.okMaxClubMessage.isShown=!1}function R(){e.okMaxClubMessage.isShown=!0}var L={};e.clubs={showLoading:!0,isResult:!1,isMistake:!1,mistakeMessage:"",isEmpty:!1,values:[]},e.country={id:0,name:"",maxGames:0,maxCountClubs:0,chL:0,euL:0,clubsToRemove:0,isMistake:!1},e.clubActions={},e.showAddClub=y,e.cancelAddRedClub=h,e.redactClub=g,e.deleteClub=v,e.confirmingDeletionClub=b,e.cancelDeletingClub=A,e.checkIfIsEmpty=S,e.checkMaxClubsCount=k,e.confirmingDeleteWindow={isShown:!1,close:T,show:w},e.okMaxClubMessage={isShown:!1,show:R,close:$},i()}function TopScorerActionController(e,t,r){function o(){u()}function n(t){t.$valid?(e.addProcess.isActionForm=!0,e.addProcess.beforeSendMistake=!1,e.playerToAdd.clubId=e.$parent.country.clubs[e.playerToAdd.clubValue].id,e.playerToAdd.clubName=e.$parent.country.clubs[e.playerToAdd.clubValue].name,a(t)):e.addProcess.beforeSendMistake=!0}function s(t){e.addProcess.redacting=!0,angular.copy(t,e.playerToAdd),e.playerToAdd.clubValue=d(t.clubName)}function a(r){e.addProcess.actionType="redact";var o=t.redact(e.playerToAdd);

o.then(i,c)}function i(t){var o=angular.copy(e.playerToAdd);delete o.clubValue,r.changeOneByPropertyAndSort(e.$parent.topScorers.values,o,"id","goals"),e.addProcess.isActionForm=!1,e.addProcess.actionResult="success"}function c(t,r){e.addProcess.isActionForm=!1,e.addProcess.actionResult="error",console.log(r,t.mistake)}function l(){e.addProcess.redacting&&(e.addProcess.redacting=!1),e.addProcess.beforeSendMistake=!1,u(),e.$parent.cancelAddRedPlayer()}function u(){e.playerToAdd={id:-1,clubValue:0}}function d(t){for(var r=0,o=e.$parent.country.clubs.length;o>r;r++)if(e.$parent.country.clubs[r].name===t)return r}e.addProcess={isActionForm:!1,actionType:"",actionResult:"",redacting:!1,beforeSendMistake:!1},e.baseFormSettings={minGoals:1,maxGoals:99},e.actionPlayer=n,e.clearPlayerForm=l,e.$on("redactPlayer",function(e,t){s(t)}),o()}function TopScorersController(e,t,r,o,n,s,a){"use strict";function i(){var r=t.country?a(t.country):"england";e.country.name=r,c(),l(r)}function c(){e.actions.isNeedToShowForm=!1,e.actions.isActionProcess=!1,e.actions.isDeletingProcess=!1,e.actions.indexAction=-1,e.actions.typeAction=-1}function l(e){var t=r.getAll(e,k);t.then(u,d)}function u(t){e.topScorers.showLoading=!1,t.values.length?(e.topScorers.values=t.values,e.topScorers.isResult=!0):e.topScorers.isEmpty=!0}function d(t,r){e.topScorers.showLoading=!1,e.topScorers.isMistake=!0,e.topScorers.mistakeMessage=t.mistake,console.log(t.status,t.mistake)}function p(t){e.country.showLoading=!0,e.country.isMistake=!1;var r=o.getAll(t);r.then(f,m)}function f(t){T=!0,e.country.clubs=t.values,e.country.showLoading=!1,n(function(){y(w,e.actions.indexAction),w=null},0)}function m(t,r){e.country.showLoading=!1,e.country.isMistake=!0,console.log(t.status,t.mistake)}function y(t,r){e.actions.isActionProcess=!0,e.actions.typeAction=1,e.actions.indexAction=r,T?(e.$broadcast("redactPlayer",t),e.actions.isNeedToShowForm=!0):(w=t,p(e.country.name))}function g(){c()}function h(t,r){$=t,e.actions.typeAction=0,e.actions.indexAction=r,e.actions.isActionProcess=!0,e.confirmingDeleteWindow.show()}function b(){e.actions.isDeletingProcess=!0;var t=r["delete"]($.id);t.then(A,P)}function v(){$={},c(),e.confirmingDeleteWindow.close()}function A(t){s.deleteOneByProperty(e.topScorers.values,"id",$.id),v()}function P(e,t){v(),console.log(t,e.mistake)}function C(){e.confirmingDeleteWindow.isShown=!1}function S(){e.confirmingDeleteWindow.isShown=!0}var k=25,T=!1,w=null,$={};e.topScorers={showLoading:!0,isResult:!1,isMistake:!1,mistakeMessage:"",isEmpty:!1,currentSort:"-goals",values:[]},e.country={showLoading:!1,isMistake:!1,name:"",clubs:[]},e.actions={},e.redactPlayer=y,e.deletePlayer=b,e.cancelAddRedPlayer=g,e.confirmingDeletionPlayer=h,e.cancelDeletingPlayer=v,e.confirmingDeleteWindow={isShown:!1,close:C,show:S},i()}angular.module("myApp").directive("actionsClubView",actionsClubViewDirective),angular.module("myApp").directive("actionsGridView",actionsGridViewDirective),angular.module("myApp").directive("backToTopBottom",backToTopBottomDirective),backToTopBottomDirective.$inject=["$window","$document"],angular.module("myApp").directive("bsTooltip",bsTooltipDirective),angular.module("myApp").directive("clubName",clubNameDirective),clubNameDirective.$inject=["$timeout","$q","teamService"],angular.module("myApp").directive("clubOfPlayerAutocomplete",clubOfPlayerAutocompleteDirective),clubOfPlayerAutocompleteDirective.$inject=["$q","$timeout","teamService"],angular.module("myApp").directive("dlcModal",dlcModalDirective),angular.module("myApp").directive("dlcNumber",dlcNumberDirective),angular.module("myApp").directive("dlcPagination",dlcPaginationDirective),dlcPaginationDirective.$inject=["$location"],angular.module("myApp").directive("dlcSort",dlcSortDirective),angular.module("myApp").directive("reactiveForm",reactiveForm),reactiveForm.$inject=["$timeout"],angular.module("myApp").directive("touchedFieldView",touchedFieldView),angular.module("myApp").directive("updateClubsTableView",updateClubsTableViewDirective),angular.module("myApp").service("arrayHelperService",arrayHelperService),angular.module("myApp").service("countryService",countryService),countryService.$inject=["$http","$q"],angular.module("myApp").service("playerPositionsService",playerPositionsService),playerPositionsService.$inject=["$q","$http"],angular.module("myApp").service("playerService",playerService),playerService.$inject=["$q","$http"],angular.module("myApp").service("teamService",teamService),teamService.$inject=["$http","$q"],angular.module("myApp").service("topScorerService",topScorerService),topScorerService.$inject=["$q","$http"],angular.module("myApp").filter("fromUrlToString",fromUrlToStringFtr),angular.module("myApp").filter("urlLike",urlLikeFtr),angular.module("myApp").animation(".dlc-slide-animation",dlcSlideAnimation),angular.module("myApp").controller("CountriesController",CountriesController),CountriesController.$inject=["$scope","$routeParams","$location","countryService","fromUrlToStringFilter"],angular.module("myApp").controller("CountryController",CountryController),CountryController.$inject=["$scope","$routeParams","countryService","fromUrlToStringFilter"],angular.module("myApp").controller("CountryPlayersController",CountryPlayersController),CountryPlayersController.$inject=["$scope","$routeParams","playerService","fromUrlToStringFilter","arrayHelperService"],angular.module("myApp").controller("PlayerActionController",PlayerActionController),PlayerActionController.$inject=["$scope","$routeParams","playerService"],angular.module("myApp").controller("PlayersController",PlayersController),PlayersController.$inject=["$scope","$routeParams","playerService","playerPositionsService","arrayHelperService","fromUrlToStringFilter"],angular.module("myApp").controller("TeamController",TeamController),TeamController.$inject=["$scope","$routeParams","teamService","playerService","fromUrlToStringFilter"],angular.module("myApp").controller("TeamsActionController",TeamsActionController),TeamsActionController.$inject=["$scope","$timeout","teamService","arrayHelperService"],angular.module("myApp").controller("TeamsController",TeamsController),TeamsController.$inject=["$scope","$routeParams","$timeout","teamService","countryService","arrayHelperService","fromUrlToStringFilter"],angular.module("myApp").controller("TopScorerActionController",TopScorerActionController),TopScorerActionController.$inject=["$scope","topScorerService","arrayHelperService"],angular.module("myApp").controller("TopScorersController",TopScorersController),TopScorersController.$inject=["$scope","$routeParams","topScorerService","teamService","$timeout","arrayHelperService","fromUrlToStringFilter"];