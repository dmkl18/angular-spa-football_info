function actionsClubViewDirective(){"use strict";var e=["delete","redact"];return{restrict:"A",scope:{process:"=",type:"=",index:"="},link:function(t,a,s){function r(){t.process===!0?n(t.index,t.type):i()}function n(t,a){var s=void 0===t?-1:+t,r=angular.element(document.querySelectorAll(o));if(r.length)if(-1===s||isNaN(s))r.find(l).prop("disabled",!0);else if(s>=0){var n=r.filter(function(t){if(t!==s)return!0;var r="."+u+"-"+e[a];return jQuery(this).addClass("active").css("display","none").nextAll(r).css("display","block"),!1});n.find(l).prop("disabled",!0)}}function i(){var e=angular.element(document.querySelectorAll(o+" "+l+":disabled")),t=angular.element(document.querySelectorAll(o+".active"));e.length&&e.prop("disabled",!1),t.length&&t.css("display","block").removeClass("active").nextAll().css("display","none")}function c(e){var t=angular.element(document.querySelectorAll(o+":not(.active) "+l+":not(:disabled)"));t.length&&t.prop("disabled",!0)}var o=s.actionsClubView,l=s.children,u=s.baseClassPart;t.$watch("process",r),t.$on("beginClubAction",function(e,t,a){n(t,a)}),t.$on("endClubAction",function(e){i()}),t.$on("endAddProcessClubAction",c)}}}function actionsGridViewDirective(){"use strict";var e,t={active:"active"};return{restrict:"A",scope:{subElementSelector:"@actionsGridView",actionElementsSelector:"@clickSelector",endAction:"="},link:function(a,s,r){function n(s){e=angular.element(s.target).parents(a.subElementSelector),e&&e.addClass(t.active)}function i(a){a===!1&&e&&(e.removeClass(t.active),e=null)}a.$watch("endAction",i),s.on("click",a.actionElementsSelector,n)}}}function backToTopBottomDirective(e,t){"use strict";var a=200,s=17;return{restrict:"A",scope:{backToTopBottom:"@",selectorClass:"@",delay:"@",bottom:"@",isStopCond:"@",stop:"&"},link:function(r,n,i){function c(e){r.isStopCond&&r.stop()||(m?setTimeout(o,m):o())}function o(){clearTimeout(p),u=window.pageYOffset;var a;if(b){var r=e.innerHeight,n=t.height();a=n-r-u,d=n-r}else a=u,d=0;a>1&&(f=a/g*s,b&&(f=-f),200>a&&(f=2*f),l())}function l(){u-=f,window.scroll(0,u),Math.abs(u-d)>Math.abs(f)+2?p=setTimeout(l,s):window.scroll(0,d)}var u,d,f,p,g=parseInt(r.backToTopBottom)||a,m=parseInt(r.delay)||0,b="true"===r.bottom;r.selectorClass?n.on("click","."+r.selectorClass,c):n.on("click",c)}}}function bsTooltipDirective(){"use strict";return{restrict:"A",link:function(e,t,a){t.attr("data-toggle","tooltip"),t.tooltip()}}}function clubNameDirective(e,t,a){"use strict";return{restrict:"A",require:"ngModel",scope:{country:"=country",redactClub:"=redactClub"},link:function(s,r,n,i){function c(){e(function(){r.trigger("checkTouchedFieldView")},0)}i.$asyncValidators.clubName=function(e,r){if(i.$isEmpty(e)||""!==s.redactClub&&e===s.redactClub)return t.when();var n;return n=a.isClubUnique(e,s.country),n.then(c,c),n}}}}function clubOfPlayerAutocompleteDirective(e,t,a){"use strict";return{restrict:"A",require:"ngModel",scope:{checkClub:"=clubOfPlayerAutocomplete",country:"=",selectData:"&onSelect"},link:function(s,r,n,i){function c(e){e.message&&s.selectData({data:e.values}),t(function(){r.trigger("checkTouchedFieldView")},0)}r.autocomplete({source:function(e,t){var s={name:e.term},r=a.searchClubByName(s);r.then(function(e){t(e.values)},function(){t()})},minLength:2,delay:600,select:function(e,t){s.selectData({data:t.item}),s.$apply()}}),r.on("keydown",function(e){s.checkClub=!1,s.$apply()}),r.on("blur",function(e){i.$viewValue=r.val(),s.$apply()}),i.$asyncValidators.clubOfPlayerAutocomplete=function(t,n){if(s.checkClub||i.$isEmpty(t))return e.when();var o,l=t===r.val()?t:r.val();return o=a.getOne(l,s.country,!s.checkClub),o.then(c,c),o}}}}function dlcModalDirective(){"use strict";return{restrict:"E",replace:!0,transclude:!0,templateUrl:"templates/modal.html",scope:{isShown:"=show",header:"@modalTitle",close:"&"},link:function(e,t,a){function s(){e.isShown?document.addEventListener("keyup",r,!1):document.removeEventListener("keyup",r,!1)}function r(t){27===+t.which&&(e.close(),e.$apply())}e.$watch("isShown",s)}}}function dlcNumberDirective(){"use strict";var e=/^-?[1-9]\d*$/,t=/^-?(?:0|[1-9]\d*)(?:\.\d+)?$/;return{restrict:"A",require:"ngModel",scope:{dlcNumber:"@"},link:function(a,s,r,n){function i(t){return 0===t||e.test(t)?!0:!1}function c(e){return t.test(e)?!0:!1}function o(e){var t=+r.min,a=+r.max;return console.log(t,a,e),t>e||e>a?!1:!0}var l="true"===r.minMax;n.$validators.dlcNumber=function(e,t){return n.$isEmpty(e)?!0:l&&!o(+e)?!1:"integer"===a.dlcNumber?i(e):c(e)}}}}function dlcPaginationDirective(e){"use strict";return{restrict:"EA",replace:!0,scope:{pages:"=dlcPagination",page:"=",btnBlockClass:"@",btnClass:"@",firstLastPagsStartOn:"@",baseHref:"@",firstGood:"@"},template:function(e,t){var a=['<div ng-show="pages>1" class="{{btnBlockClass}} dlc-pagination">','<a ng-if="pages>=firstLastPagsStartOn&&page!=1" ng-href="#{{baseHref}}1" class="{{btnClass}}">','<i class="fa fa-angle-double-left"></i>',"</a>",'<button ng-if="pages>=firstLastPagsStartOn&&page==1" class="{{btnClass}}" disabled>','<i class="fa fa-angle-double-left"></i>',"</button>",'<a ng-if="page!=1" ng-href="#{{baseHref}}{{page-1}}" class="{{btnClass}}">','<i class="fa fa-angle-left"></i>',"</a>",'<button ng-if="page==1" class="{{btnClass}}" disabled>','<i class="fa fa-angle-left"></i>',"</button>",'<a ng-if="page!=pages" ng-href="#{{baseHref}}{{page+1}}" class="{{btnClass}}">','<i class="fa fa-angle-right"></i>',"</a>",'<button ng-if="page==pages" class="{{btnClass}}" disabled>','<i class="fa fa-angle-right"></i>',"</button>",'<a ng-if="pages>=firstLastPagsStartOn&&page!=pages" ng-href="#{{baseHref}}{{pages}}" class="{{btnClass}}">','<i class="fa fa-angle-double-right"></i>',"</a>",'<button ng-if="pages>=firstLastPagsStartOn&&page==pages" class="{{btnClass}}" disabled>','<i class="fa fa-angle-double-right"></i>',"</button>","</div>"].join("");return a},link:function(t,a,s){function r(){var e,r,o,l=a.children().eq(t.pages<t.firstLastPagsStartOn?0:1),u="";if(c){var d=a.children();d.each(function(){var e=this.innerHTML;"..."!==e&&isNaN(+e)||angular.element(this).remove()})}if(t.pages<=i||"true"===s.alwaysFull)for(e=0,r=t.pages;r>e;e++)u+=n(e);else{for(e=0,r=2;r>e;e++)u+=n(e);if(2===t.page&&(u+=n(2)),(t.page<3||t.page>4)&&(u+='<span class="fromto">...</span>'),t.page>2&&t.page<=t.pages-2){for(o=3===t.page?2:t.page-2,e=o,r=t.page+1;r>e;e++)u+=n(e);t.pages-2-t.page>1&&(u+='<span class="fromto">...</span>')}for(o=t.page===t.pages-2?t.pages-1:t.page===t.pages-1?t.pages-3:t.pages-2,e=o;e<t.pages;e++)u+=n(e)}l.after(u),c=!0}function n(e){var a;return a=e!==t.page-1?'<a href="#'+t.baseHref+(e+1)+'" class="'+t.btnClass+'">'+(e+1)+"</a>":'<button class="'+t.btnClass+' active" disabled>'+(e+1)+"</button>"}var i=8,c=!1;t.btnBlockClass||(t.btnBlockClass="btn-group"),t.btnClass||(t.btnClass="btn btn-default"),t.firstLastPagsStartOn||(t.firstLastPagsStartOn=6),t.baseHref||(t.baseHref=e.path()),t.baseHref=-1===t.baseHref.indexOf("page")?"/"===t.baseHref[t.baseHref.length-1]?t.baseHref+"page/":t.baseHref+"/page/":t.baseHref.substring(0,t.baseHref.indexOf("page"))+"page/",t.$watch("pages",function(e,a){"true"===t.firstGood?(setTimeout(r,0),t.firstGood=!1):e>1&&a!==e&&setTimeout(r,0)})}}}function dlcSortDirective(){"use strict";var e,t={sortClass:"dlc-sort-item",sortAttr:"data-sort-value",sortHideClass:"dlc-sort-hidden"},a='&nbsp;<i class="fa fa-chevron-down '+t.sortHideClass+'"></i><i class="fa fa-chevron-up '+t.sortHideClass+'"></i>';return{restrict:"A",scope:{sort:"=dlcSort"},link:function(s,r,n){function i(a){var r=this.getAttribute(t.sortAttr),n=s.sort.indexOf(r);-1===n||1===n?e="up":0===n&&(e="down",r="-"+r),s.sort=r,o(this),s.$apply()}function c(a,s){e="-"===a[0]?"down":"up";for(var r,n="down"===e?a.substring(1):a,i=0;i<l.length;i++)if(l.eq(i).attr(t.sortAttr)===n){r=l.get(i);break}o(r)}function o(a){l.find("i").each(function(){-1===this.getAttribute("class").indexOf(t.sortHideClass)&&this.setAttribute("class",this.getAttribute("class")+" "+t.sortHideClass)}),a.getElementsByClassName("fa-chevron-"+e)[0].setAttribute("class","fa fa-chevron-"+e)}var l=r.find("."+t.sortClass);l.append(a),e="-"===s.sort[0]?"down":"up";var u="down"===e?s.sort.substring(1):s.sort,d=r.find("."+t.sortClass+"[data-sort-value="+u+"]");d.find(".fa-chevron-"+e).removeClass(t.sortHideClass),l.on("click",i),s.$watch("sort",c)}}}function reactiveForm(e){"use strict";var t=null,a=5e3,s={successForm:"has-success",errorForm:"has-error",success:"alert alert-success",error:"alert alert-danger",notRedacting:"dlc-not-redacting"},r={isDisplayed:!1,addSuccess:"Record added successfully",addError:"When you try to add an entry error occurred",redactSuccess:"Editing was successful",redactError:"When editing error occurred"};return{restrict:"A",require:"form",scope:{actionType:"=",actionResult:"=",clearForm:"=",actionRedact:"="},link:function(n,i,c,o){function l(e,t){""!==e&&("success"===e?f(n.actionType):"error"===e&&p(n.actionType),n.actionResult="",n.actionType="")}function u(e,t){e&&g()}function d(e,t){e?i.find("."+s.notRedacting).prop("readonly",!0):i.find("."+s.notRedacting).prop("readonly",!1)}function f(e){"add"===e?(g(),m(r.addSuccess,s.success)):m(r.redactSuccess,s.success)}function p(e){var t="add"===e?r.addError:r.redactError;m(t,s.error)}function g(){var e=i.find("."+s.successForm),t=i.find("."+s.errorForm),a=i.find("."+h);e.length&&e.removeClass(s.successForm),t.length&&t.removeClass(s.errorForm),a.length&&a.css("display","none"),o.$setPristine(),o.$setUntouched()}function m(s,n){r.isDisplayed&&(b(),t=null),v.addClass(n).text(s),r.isDisplayed=!0,t=e(b,a)}function b(){v.text("").removeClass(),r.isDisplayed=!1}var v=angular.element(document.querySelectorAll(c.messageBox)),h=c.errBlockClass;n.$watch("actionResult",l),n.$watch("clearForm",u),n.$watch("actionRedact",d),n.$on("actionClubError",function(e,t){p(t)}),n.$on("actionClubSuccess",function(e,t){f(t)}),n.$on("clearClubForm",function(e){g()})}}}function touchedFieldView(){"use strict";var e={success:"has-success",error:"has-error"};return{restrict:"A",require:"^form",scope:{param:"@touchedFieldView"},link:function(t,a,s,r){function n(s){var n;r[t.param].$invalid&&r[t.param].$touched?(a.addClass(e.error),n=a.find("."+o),n.length&&n.css("display","block")):a.hasClass(e.error)&&(a.removeClass(e.error),n=a.find("."+o),n.length&&n.css("display","none")),r[t.param].$valid&&r[t.param].$touched&&a.addClass(e.success)}var i=a.find("[name="+t.param+"]"),c=s.checkAjaxView,o=s.errBlockClass;i.length&&(i.on("blur",n),"true"===c&&i.on("checkTouchedFieldView",n))}}}function updateClubsTableViewDirective(){"use strict";var e={chL:"bg-success",euL:"bg-info",clubRemove:"bg-danger-dlc"};return{restrict:"A",scope:{championsLeague:"@chl",leagueEurope:"@el",clubRemove:"@",tableResult:"="},link:function(t,a,s){function r(e){i()}function n(e){setTimeout(i,0)}function i(){var s=a.find(c);s.each(function(a){var s=angular.element(this);a<t.championsLeague&&!s.hasClass(e.chL)?s.addClass(e.chL):a>=t.championsLeague&&s.hasClass(e.chL)&&s.removeClass(e.chL),a>=t.championsLeague&&a<t.leagueEurope&&!s.hasClass(e.euL)?s.addClass(e.euL):(a>=t.leagueEurope||a<t.championsLeague)&&s.hasClass(e.euL)&&s.removeClass(e.euL),0!==+t.clubRemove&&a>=t.clubRemove&&!s.hasClass(e.clubRemove)?s.addClass(e.clubRemove):a<t.clubRemove&&s.hasClass(e.clubRemove)&&s.removeClass(e.clubRemove)})}var c=s.updateClubsTableView;t.$on("updateTableView",function(e){i()}),t.$watch("championsLeague",r),t.$watch("tableResult",n)}}}angular.module("myApp").directive("actionsClubView",actionsClubViewDirective),angular.module("myApp").directive("actionsGridView",actionsGridViewDirective),angular.module("myApp").directive("backToTopBottom",backToTopBottomDirective),backToTopBottomDirective.$inject=["$window","$document"],angular.module("myApp").directive("bsTooltip",bsTooltipDirective),angular.module("myApp").directive("clubName",clubNameDirective),clubNameDirective.$inject=["$timeout","$q","teamService"],angular.module("myApp").directive("clubOfPlayerAutocomplete",clubOfPlayerAutocompleteDirective),clubOfPlayerAutocompleteDirective.$inject=["$q","$timeout","teamService"],angular.module("myApp").directive("dlcModal",dlcModalDirective),angular.module("myApp").directive("dlcNumber",dlcNumberDirective),angular.module("myApp").directive("dlcPagination",dlcPaginationDirective),dlcPaginationDirective.$inject=["$location"],angular.module("myApp").directive("dlcSort",dlcSortDirective),angular.module("myApp").directive("reactiveForm",reactiveForm),reactiveForm.$inject=["$timeout"],angular.module("myApp").directive("touchedFieldView",touchedFieldView),angular.module("myApp").directive("updateClubsTableView",updateClubsTableViewDirective);