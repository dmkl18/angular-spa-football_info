function actionsClubViewDirective(){"use strict";var e=["delete","redact"];return{restrict:"A",scope:{process:"=",type:"=",index:"="},link:function(t,r,c){function i(){t.process===!0?n(t.index,t.type):o()}function n(t,r){var c=void 0===t?-1:+t,i=angular.element(document.querySelectorAll(s));if(i.length)if(-1===c||isNaN(c))i.find(l).prop("disabled",!0);else if(c>=0){var n=i.filter(function(t){if(t!==c)return!0;var i="."+u+"-"+e[r];return jQuery(this).addClass("active").css("display","none").nextAll(i).css("display","block"),!1});n.find(l).prop("disabled",!0)}}function o(){var e=angular.element(document.querySelectorAll(s+" "+l+":disabled")),t=angular.element(document.querySelectorAll(s+".active"));e.length&&e.prop("disabled",!1),t.length&&t.css("display","block").removeClass("active").nextAll().css("display","none")}function a(e){var t=angular.element(document.querySelectorAll(s+":not(.active) "+l+":not(:disabled)"));t.length&&t.prop("disabled",!0)}var s=c.actionsClubView,l=c.children,u=c.baseClassPart;t.$watch("process",i),t.$on("beginClubAction",function(e,t,r){n(t,r)}),t.$on("endClubAction",function(e){o()}),t.$on("endAddProcessClubAction",a)}}}function actionsGridViewDirective(){"use strict";var e,t={active:"active"};return{restrict:"A",scope:{subElementSelector:"@actionsGridView",actionElementsSelector:"@clickSelector",endAction:"="},link:function(r,c,i){function n(c){e=angular.element(c.target).parents(r.subElementSelector),e&&e.addClass(t.active)}function o(r){r===!1&&e&&(e.removeClass(t.active),e=null)}r.$watch("endAction",o),c.on("click",r.actionElementsSelector,n)}}}function backToTopBottomDirective(e,t){"use strict";var r=200,c=17;return{restrict:"A",scope:{backToTopBottom:"@",selectorClass:"@",delay:"@",bottom:"@",isStopCond:"@",stop:"&"},link:function(i,n,o){function a(e){i.isStopCond&&i.stop()||(v?setTimeout(s,v):s())}function s(){clearTimeout(p),u=window.pageYOffset;var r;if(h){var i=e.innerHeight,n=t.height();r=n-i-u,d=n-i}else r=u,d=0;r>1&&(m=r/f*c,h&&(m=-m),200>r&&(m=2*m),l())}function l(){u-=m,window.scroll(0,u),Math.abs(u-d)>Math.abs(m)+2?p=setTimeout(l,c):window.scroll(0,d)}var u,d,m,p,f=parseInt(i.backToTopBottom)||r,v=parseInt(i.delay)||0,h="true"===i.bottom;i.selectorClass?n.on("click","."+i.selectorClass,a):n.on("click",a)}}}function bsTooltipDirective(){"use strict";return{restrict:"A",link:function(e,t,r){t.attr("data-toggle","tooltip"),t.tooltip()}}}function clubNameDirective(e,t,r){"use strict";return{restrict:"A",require:"ngModel",scope:{country:"=country",redactClub:"=redactClub"},link:function(c,i,n,o){function a(){e(function(){i.trigger("checkTouchedFieldView")},0)}o.$asyncValidators.clubName=function(e,i){if(o.$isEmpty(e)||""!==c.redactClub&&e===c.redactClub)return t.when();var n;return n=r.isClubUnique(e,c.country),n.then(a,a),n}}}}function clubOfPlayerAutocompleteDirective(e,t,r){"use strict";return{restrict:"A",require:"ngModel",scope:{checkClub:"=clubOfPlayerAutocomplete",country:"=",selectData:"&onSelect"},link:function(c,i,n,o){function a(e){e.message&&c.selectData({data:e.values}),t(function(){i.trigger("checkTouchedFieldView")},0)}i.autocomplete({source:function(e,t){var c={name:e.term},i=r.searchClubByName(c);i.then(function(e){t(e.values)},function(){t()})},minLength:2,delay:600,select:function(e,t){c.selectData({data:t.item}),c.$apply()}}),i.on("keydown",function(e){c.checkClub=!1,c.$apply()}),i.on("blur",function(e){o.$viewValue=i.val(),c.$apply()}),o.$asyncValidators.clubOfPlayerAutocomplete=function(t,n){if(c.checkClub||o.$isEmpty(t))return e.when();var s,l=t===i.val()?t:i.val();return s=r.getOne(l,c.country,!c.checkClub),s.then(a,a),s}}}}function dlcModalDirective(){"use strict";return{restrict:"E",replace:!0,transclude:!0,templateUrl:"templates/modal.html",scope:{isShown:"=show",header:"@modalTitle",close:"&"},link:function(e,t,r){function c(){e.isShown?document.addEventListener("keyup",i,!1):document.removeEventListener("keyup",i,!1)}function i(t){27===+t.which&&(e.close(),e.$apply())}e.$watch("isShown",c)}}}function dlcNumberDirective(){"use strict";var e=/^[1-9]\d*$/,t=/^0|(?:[1-9]\d*)(?:\.\d+)?$/;return{restrict:"A",require:"ngModel",scope:{dlcNumber:"@"},link:function(r,c,i,n){function o(t){return 0===t||e.test(t)?!0:!1}function a(e){return t.test(e)?!0:!1}n.$validators.dlcNumber=function(e,t){return n.$isEmpty(e)?!0:"integer"===r.dlcNumber?o(e):a(e)}}}}function dlcSortDirective(){"use strict";var e,t={sortClass:"dlc-sort-item",sortAttr:"data-sort-value",sortHideClass:"dlc-sort-hidden"},r='&nbsp;<i class="fa fa-chevron-down '+t.sortHideClass+'"></i><i class="fa fa-chevron-up '+t.sortHideClass+'"></i>';return{restrict:"A",scope:{sort:"=dlcSort"},link:function(c,i,n){function o(r){var i=this.getAttribute(t.sortAttr),n=c.sort.indexOf(i);-1===n||1===n?e="up":0===n&&(e="down",i="-"+i),c.sort=i,s(this),c.$apply()}function a(r,c){e="-"===r[0]?"down":"up";for(var i,n="down"===e?r.substring(1):r,o=0;o<l.length;o++)if(l.eq(o).attr(t.sortAttr)===n){i=l.get(o);break}s(i)}function s(r){l.find("i").each(function(){-1===this.getAttribute("class").indexOf(t.sortHideClass)&&this.setAttribute("class",this.getAttribute("class")+" "+t.sortHideClass)}),r.getElementsByClassName("fa-chevron-"+e)[0].setAttribute("class","fa fa-chevron-"+e)}var l=i.find("."+t.sortClass);l.append(r),e="-"===c.sort[0]?"down":"up";var u="down"===e?c.sort.substring(1):c.sort,d=i.find("."+t.sortClass+"[data-sort-value="+u+"]");d.find(".fa-chevron-"+e).removeClass(t.sortHideClass),l.on("click",o),c.$watch("sort",a)}}}function reactiveForm(e){"use strict";var t=null,r=5e3,c={successForm:"has-success",errorForm:"has-error",success:"alert alert-success",error:"alert alert-danger",notRedacting:"dlc-not-redacting"},i={isDisplayed:!1,addSuccess:"Record added successfully",addError:"When you try to add an entry error occurred",redactSuccess:"Editing was successful",redactError:"When editing error occurred"};return{restrict:"A",require:"form",scope:{actionType:"=",actionResult:"=",clearForm:"=",actionRedact:"="},link:function(n,o,a,s){function l(e,t){""!==e&&("success"===e?m(n.actionType):"error"===e&&p(n.actionType),n.actionResult="",n.actionType="")}function u(e,t){e&&f()}function d(e,t){e?o.find("."+c.notRedacting).prop("readonly",!0):o.find("."+c.notRedacting).prop("readonly",!1)}function m(e){"add"===e?(f(),v(i.addSuccess,c.success)):v(i.redactSuccess,c.success)}function p(e){var t="add"===e?i.addError:i.redactError;v(t,c.error)}function f(){var e=o.find("."+c.successForm),t=o.find("."+c.errorForm),r=o.find("."+g);e.length&&e.removeClass(c.successForm),t.length&&t.removeClass(c.errorForm),r.length&&r.css("display","none"),s.$setPristine(),s.$setUntouched()}function v(c,n){i.isDisplayed&&(h(),t=null),b.addClass(n).text(c),i.isDisplayed=!0,t=e(h,r)}function h(){b.text("").removeClass(),i.isDisplayed=!1}var b=angular.element(document.querySelectorAll(a.messageBox)),g=a.errBlockClass;n.$watch("actionResult",l),n.$watch("clearForm",u),n.$watch("actionRedact",d),n.$on("actionClubError",function(e,t){p(t)}),n.$on("actionClubSuccess",function(e,t){m(t)}),n.$on("clearClubForm",function(e){f()})}}}function touchedFieldView(){"use strict";var e={success:"has-success",error:"has-error"};return{restrict:"A",require:"^form",scope:{param:"@touchedFieldView"},link:function(t,r,c,i){function n(c){var n;i[t.param].$invalid&&i[t.param].$touched?(r.addClass(e.error),n=r.find("."+s),n.length&&n.css("display","block")):r.hasClass(e.error)&&(r.removeClass(e.error),n=r.find("."+s),n.length&&n.css("display","none")),i[t.param].$valid&&i[t.param].$touched&&r.addClass(e.success)}var o=r.find("[name="+t.param+"]"),a=c.checkAjaxView,s=c.errBlockClass;o.length&&(o.on("blur",n),"true"===a&&o.on("checkTouchedFieldView",n))}}}function updateClubsTableViewDirective(){"use strict";var e={chL:"bg-success",euL:"bg-info",clubRemove:"bg-danger-dlc"};return{restrict:"A",scope:{championsLeague:"@chl",leagueEurope:"@el",clubRemove:"@",tableResult:"="},link:function(t,r,c){function i(e){o()}function n(e){setTimeout(o,0)}function o(){var c=r.find(a);c.each(function(r){var c=angular.element(this);r<t.championsLeague&&!c.hasClass(e.chL)?c.addClass(e.chL):r>=t.championsLeague&&c.hasClass(e.chL)&&c.removeClass(e.chL),r>=t.championsLeague&&r<t.leagueEurope&&!c.hasClass(e.euL)?c.addClass(e.euL):(r>=t.leagueEurope||r<t.championsLeague)&&c.hasClass(e.euL)&&c.removeClass(e.euL),0!==+t.clubRemove&&r>=t.clubRemove&&!c.hasClass(e.clubRemove)?c.addClass(e.clubRemove):r<t.clubRemove&&c.hasClass(e.clubRemove)&&c.removeClass(e.clubRemove)})}var a=c.updateClubsTableView;t.$on("updateTableView",function(e){o()}),t.$watch("championsLeague",i),t.$watch("tableResult",n)}}}angular.module("myApp").directive("actionsClubView",actionsClubViewDirective),angular.module("myApp").directive("actionsGridView",actionsGridViewDirective),angular.module("myApp").directive("backToTopBottom",backToTopBottomDirective),backToTopBottomDirective.$inject=["$window","$document"],angular.module("myApp").directive("bsTooltip",bsTooltipDirective),angular.module("myApp").directive("clubName",clubNameDirective),clubNameDirective.$inject=["$timeout","$q","teamService"],angular.module("myApp").directive("clubOfPlayerAutocomplete",clubOfPlayerAutocompleteDirective),clubOfPlayerAutocompleteDirective.$inject=["$q","$timeout","teamService"],angular.module("myApp").directive("dlcModal",dlcModalDirective),angular.module("myApp").directive("dlcNumber",dlcNumberDirective),angular.module("myApp").directive("dlcSort",dlcSortDirective),angular.module("myApp").directive("reactiveForm",reactiveForm),reactiveForm.$inject=["$timeout"],angular.module("myApp").directive("touchedFieldView",touchedFieldView),angular.module("myApp").directive("updateClubsTableView",updateClubsTableViewDirective);